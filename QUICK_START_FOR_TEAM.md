# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

## –î–ª—è –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/vilkafork21/TOBD_project.git
cd TOBD_project
```

### 2. ‚ö†Ô∏è –í–ê–ñ–ù–û: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**CSV —Ñ–∞–π–ª—ã –ù–ï –≤–∫–ª—é—á–µ–Ω—ã –≤ Git** (—Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ, 9.6 GB).

**–î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ü–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –¥–ª—è –∑–∞—â–∏—Ç—ã)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [Kaggle](https://www.kaggle.com/)
2. –°–∫–∞—á–∞–π—Ç–µ: [Smart meters in London](https://www.kaggle.com/datasets/jeanmidev/smart-meters-in-london)
3. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤
4. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã:
   ```bash
   cd /path/to/extracted/archive-2/halfhourly_dataset/halfhourly_dataset/
   mv block_*.csv /path/to/TOBD_project/data/raw/
   ```
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   ```bash
   ls data/raw/block_*.csv | wc -l
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 112-336 —Ñ–∞–π–ª–æ–≤
   ```

**–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:** 30-60 –º–∏–Ω—É—Ç

#### –í–∞—Ä–∏–∞–Ω—Ç B: –¢–µ—Å—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç (–¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)

–°–æ–∑–¥–∞–π—Ç–µ `data/raw/sample_energy_data.csv` —Å 50-100 —Å—Ç—Ä–æ–∫–∞–º–∏:

```csv
LCLid,day,energy_kwh,timestamp
MAC000002,2024-01-01,0.125,2024-01-01 00:00:00
MAC000002,2024-01-01,0.089,2024-01-01 01:00:00
...
```

**–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:** ~20 —Å–µ–∫—É–Ω–¥

üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** –°–º. `data/raw/DATASET_INSTRUCTIONS.md`

---

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (–ø–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã)
docker-compose ps

# –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "Up" –∏–ª–∏ "healthy"
```

---

### 4. –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL | –õ–æ–≥–∏–Ω/–ü–∞—Ä–æ–ª—å |
|--------|-----|--------------|
| **Airflow** | http://localhost:8081 | `airflow` / `airflow` |
| **Streamlit** | http://localhost:8501 | - |

---

### 5. –ó–∞–ø—É—Å–∫ ETL –ø–∞–π–ø–ª–∞–π–Ω–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8081
2. –í–æ–π–¥–∏—Ç–µ: `airflow` / `airflow`
3. –ù–∞–π–¥–∏—Ç–µ DAG `energy_analytics_etl`
4. **–í–∫–ª—é—á–∏—Ç–µ DAG** (—Ç—É–º–±–ª–µ—Ä —Å–ª–µ–≤–∞)
5. –ù–∞–∂–º–∏—Ç–µ ‚ñ∂Ô∏è **"Trigger DAG"**

---

### 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–í Airflow UI:**
- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ DAG ‚Üí –≤–∫–ª–∞–¥–∫–∞ **"Graph"**
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ü–≤–µ—Ç–æ–º –∑–∞–¥–∞—á:
  - üü° –ñ–µ–ª—Ç—ã–π = –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
  - üü¢ –ó–µ–ª–µ–Ω—ã–π = —É—Å–ø–µ—à–Ω–æ
  - üî¥ –ö—Ä–∞—Å–Ω—ã–π = –æ—à–∏–±–∫–∞

**–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**
```bash
docker-compose logs -f airflow-scheduler
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è:**
- –¢–µ—Å—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç: ~20 —Å–µ–∫—É–Ω–¥
- –ü–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç: **30-60 –º–∏–Ω—É—Ç**

---

### 7. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á:

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8501
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –≤ —Ñ–∏–ª—å—Ç—Ä–µ:
   - –¢–µ—Å—Ç–æ–≤—ã–π: **2024-01-01 - 2024-01-03**
   - –ü–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç: **2011-2014**

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
TOBD_project/
‚îú‚îÄ‚îÄ airflow/dags/          # ETL –ø–∞–π–ø–ª–∞–π–Ω—ã (Airflow)
‚îú‚îÄ‚îÄ spark_jobs/            # Spark –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–¥ –≤ DAG)
‚îú‚îÄ‚îÄ streamlit_app/         # –î–∞—à–±–æ—Ä–¥ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ sql/                   # –°—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ raw/              # CSV —Ñ–∞–π–ª—ã (–ù–ï –≤ Git!)
‚îÇ   ‚îî‚îÄ‚îÄ processed/        # Parquet —Ñ–∞–π–ª—ã (–ù–ï –≤ Git!)
‚îú‚îÄ‚îÄ docker-compose.yml    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
‚îî‚îÄ‚îÄ README.md            # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
docker-compose down

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ!)
docker-compose down -v

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f airflow-scheduler

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
docker exec -it energy_postgres psql -U postgres -d energy_analytics

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
docker exec energy_postgres psql -U postgres -d energy_analytics -c "SELECT COUNT(*) FROM raw.energy_consumption;"
```

---

## ‚ùì –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: DAG –Ω–µ –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ CSV —Ñ–∞–π–ª–æ–≤
ls data/raw/block_*.csv | wc -l

# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec energy_airflow_scheduler ls /opt/airflow/data/raw/block_*.csv | wc -l
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** 112-336 —Ñ–∞–π–ª–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ

–ï—Å–ª–∏ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ —Å–µ–∫—É–Ω–¥—ã ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –ë–î
docker exec energy_postgres psql -U postgres -d energy_analytics -c "TRUNCATE TABLE raw.energy_consumption;"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ DAG –≤ Airflow
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏

–£–≤–µ–ª–∏—á—å—Ç–µ –ø–∞–º—è—Ç—å –¥–ª—è Docker:
- Docker Desktop ‚Üí Settings ‚Üí Resources ‚Üí Memory: **6-8 GB**

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `README.md`
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** `START_HERE.md`
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∞—Ç–∞—Å–µ—Ç–µ:** `data/raw/DATASET_INSTRUCTIONS.md`
- **–†–∞–±–æ—Ç–∞ —Å Git:** `GIT_GUIDE.md`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub:** `GITHUB_SETUP.md`

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞

- [ ] –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω
- [ ] Docker Desktop —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [ ] –î–∞—Ç–∞—Å–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –≤ `data/raw/`
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã (`docker-compose up -d`)
- [ ] Airflow –¥–æ—Å—Ç—É–ø–µ–Ω (http://localhost:8081)
- [ ] DAG —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω (–≤—Å–µ –∑–∞–¥–∞—á–∏ –∑–µ–ª–µ–Ω—ã–µ)
- [ ] Streamlit –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ (http://localhost:8501)

**–ì–æ—Ç–æ–≤–æ!** üéâ

